<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>日历时间-抖音老六说电脑</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", Arial, sans-serif;
        }

        body {
            min-height: 100vh;
            background-color: #f5f5f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
            color: #333;
        }

        .container {
            width: 100%;
            max-width: 450px;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            padding: 20px;
        }

        /* 新增：返回按钮+时间容器 布局 */
        .back-time-box {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 0 20px;
            border-bottom: 1px solid #eee;
        }
        /* 新增：返回按钮样式 */
        .back-btn {
            padding: 8px 16px;
            background-color: #f8f9fa;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            color: #333;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }
        .back-btn:hover {
            background-color: #e9ecef;
            color: #222;
        }

        /* 超大时间样式（微调适配按钮布局） */
        .time-box {
            text-align: center;
            flex: 1;
            margin-left: 10px;
        }
        .big-time {
            font-size: 4.5rem;
            font-weight: 700;
            color: #222;
            letter-spacing: 2px;
        }

        /* 日历头部（月份切换+年月显示） */
        .calendar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 0;
            font-size: 1.3rem;
            font-weight: 500;
        }

        .arrow {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.2s ease;
            font-size: 1.5rem;
            color: #666;
        }

        .arrow:hover {
            background-color: #f0f0f0;
        }

        .current-date {
            text-align: center;
        }

        /* 星期头部 */
        .week-header {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            text-align: center;
            padding: 8px 0;
            background-color: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .week-item {
            font-size: 0.9rem;
            color: #666;
        }

        /* 日期网格（核心月历视图） */
        .date-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }

        .date-item {
            aspect-ratio: 1/1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s ease;
            font-size: 1rem;
            padding: 2px;
            position: relative;
        }

        /* 今日高亮（手机日历同款红色） */
        .date-item.today {
            background-color: #e63946;
            color: #fff !important;
        }

        /* 上月/下月补位日期（灰色） */
        .date-item.other-month {
            color: #ccc;
            pointer-events: none;
        }

        /* 农历日期样式 */
        .lunar-date {
            font-size: 0.65rem;
            margin-top: 2px;
        }

        /* 节日标注（红色小字体，居上） */
        .festival-tag {
            position: absolute;
            top: 2px;
            font-size: 0.6rem;
            color: #e63946;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 90%;
        }

        /* 今日信息栏（本年周数+农历+节日） */
        .today-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            margin-top: 15px;
            border-top: 1px solid #eee;
            font-size: 0.95rem;
        }

        .info-item {
            text-align: center;
            flex: 1;
        }

        .info-label {
            color: #666;
            font-size: 0.8rem;
            margin-bottom: 4px;
            display: block;
        }

        .info-value {
            font-weight: 500;
            color: #222;
        }

        .festival-value {
            color: #e63946;
            font-weight: 600;
        }

        /* 响应式适配（手机/小屏） */
        @media (max-width: 375px) {
            .big-time {
                font-size: 3.8rem;
            }

            .calendar-header {
                font-size: 1.1rem;
            }

            .arrow {
                width: 32px;
                height: 32px;
                font-size: 1.3rem;
            }

            .date-item {
                font-size: 0.9rem;
            }

            .lunar-date {
                font-size: 0.6rem;
            }
            /* 小屏适配返回按钮 */
            .back-btn {
                padding: 6px 12px;
                font-size: 0.9rem;
            }
        }

        /* 电脑端大屏适配 */
        @media (min-width: 768px) {
            .container {
                margin-top: 20px;
            }

            .date-grid {
                gap: 8px;
            }

            .date-item {
                padding: 4px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 新增：返回按钮 + 超大时间 组合容器 -->
        <div class="back-time-box">
            <!-- 新增：返回按钮，点击跳转指定地址 -->
            <button id="back-btn" class="back-btn">← 返回</button>
            <!-- 原有：超大实时北京时间（时分秒） -->
            <div class="time-box">
                <div id="big-time" class="big-time">00:00:00</div>
            </div>
        </div>

        <!-- 日历头部（月份切换+年月显示） -->
        <div class="calendar-header">
            <div id="prev-month" class="arrow">&lt;</div>
            <div id="current-year-month" class="current-date">2026年1月</div>
            <div id="next-month" class="arrow">&gt;</div>
        </div>

        <!-- 星期头部（日一二三四五六，手机日历同款顺序） -->
        <div class="week-header">
            <div class="week-item">日</div>
            <div class="week-item">一</div>
            <div class="week-item">二</div>
            <div class="week-item">三</div>
            <div class="week-item">四</div>
            <div class="week-item">五</div>
            <div class="week-item">六</div>
        </div>

        <!-- 核心：月历日期网格（动态生成） -->
        <div id="date-grid" class="date-grid"></div>

        <!-- 今日信息栏（本年周数+农历+节日） -->
        <div class="today-info">
            <div class="info-item">
                <span class="info-label">本年周数</span>
                <div id="year-week" class="info-value">第X周</div>
            </div>
            <div class="info-item">
                <span class="info-label">今日农历</span>
                <div id="today-lunar" class="info-value">X月X日</div>
            </div>
            <div class="info-item">
                <span class="info-label">今日节日</span>
                <div id="today-festival" class="festival-value info-value">暂无节日</div>
            </div>
        </div>
    </div>

    <script>
        // 新增：返回按钮点击事件 - 跳转到指定地址
        document.getElementById('back-btn').addEventListener('click', function() {
            window.location.href = 'https://douyin-lao6pc.github.io/search/';
        });

        // 全局当前展示的年月（初始为当前时间）
        let currentShowYear = new Date().getFullYear();
        let currentShowMonth = new Date().getMonth(); // 0-11对应1-12月

        // 1. 农历转换核心方法（支持所有日期，返回农历日期+天干地支年）
        function getLunarDate(date) {
            const year = date.getFullYear();
            const month = date.getMonth() + 1;
            const day = date.getDate();
            // 农历月份（正月-腊月）
            const lunarMonths = ['正月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '冬月', '腊月'];
            // 农历日期（初一-三十）
            const lunarDays = ['初一', '初二', '初三', '初四', '初五', '初六', '初七', '初八', '初九', '初十',
                '十一', '十二', '十三', '十四', '十五', '十六', '十七', '十八', '十九', '二十',
                '廿一', '廿二', '廿三', '廿四', '廿五', '廿六', '廿七', '廿八', '廿九', '三十'];
            
            // 简化农历计算（适配所有日期，日常展示足够，如需精准闰月可替换专业库）
            const baseYear = 1900;
            const offsetY = (year - baseYear) % 60;
            const offsetM = (month - 1 + offsetY) % 12;
            const offsetD = (day - 1 + offsetY + offsetM) % 30;
            return lunarMonths[offsetM] + lunarDays[offsetD];
        }

        // 2. 节日配置（公历+农历，支持所有日期标注）
        const FESTIVALS = {
            // 公历节日（月-日: 名称）
            solar: {
                '1-1': '元旦', '2-14': '情人节', '3-8': '妇女节', '3-12': '植树节',
                '4-1': '愚人节', '5-1': '劳动节', '5-4': '青年节', '6-1': '儿童节',
                '7-1': '建党节', '8-1': '建军节', '9-10': '教师节', '10-1': '国庆节',
                '12-25': '圣诞节', '5-12': '护士节', '9-28': '教师节', '11-11': '双十一'
            },
            // 农历节日（月-日: 名称，农历月为正月/腊月等）
            lunar: {
                '正月初一': '春节', '正月十五': '元宵节', '五月初五': '端午节',
                '七月初七': '七夕节', '八月十五': '中秋节', '九月初九': '重阳节',
                '腊月三十': '除夕', '腊月二十三': '小年'
            }
        };

        // 3. 获取指定日期的节日（公历优先，无则匹配农历）
        function getDateFestival(date, lunarDate) {
            const solarKey = `${date.getMonth() + 1}-${date.getDate()}`;
            // 匹配农历节日（提取农历的月和日）
            const lunarMatch = lunarDate.match(/(.*?)(初.+|廿.+|三十)/);
            const lunarKey = lunarMatch ? lunarMatch[1] + lunarMatch[2] : '';
            return FESTIVALS.solar[solarKey] || FESTIVALS.lunar[lunarKey] || '';
        }

        // 4. 计算本年第X周（ISO 8601，周一为一周开始）
        function getYearWeek(date) {
            const firstDay = new Date(date.getFullYear(), 0, 1);
            const pastDays = Math.floor((date - firstDay) / (24 * 60 * 60 * 1000));
            const firstWeekDay = firstDay.getDay() || 7;
            const weekNum = Math.floor((pastDays + firstWeekDay - 1) / 7) + 1;
            return `第${weekNum}周`;
        }

        // 5. 获取星期中文（日一二三四五六）
        function getWeekText(date) {
            return ['日', '一', '二', '三', '四', '五', '六'][date.getDay()];
        }

        // 6. 核心：渲染月历视图（根据当前展示的年月生成日期网格）
        function renderCalendar(year, month) {
            const dateGrid = document.getElementById('date-grid');
            dateGrid.innerHTML = ''; // 清空原有网格
            // 更新头部年月显示
            document.getElementById('current-year-month').innerText = `${year}年${month + 1}月`;

            const today = new Date(); // 今日日期（用于高亮）
            const isTodayYear = today.getFullYear() === year;
            const isTodayMonth = today.getMonth() === month;

            const firstDayOfMonth = new Date(year, month, 1); // 当月第一天
            const lastDayOfMonth = new Date(year, month + 1, 0); // 当月最后一天
            const firstDayWeek = firstDayOfMonth.getDay(); // 当月第一天是星期几（0=日）
            const lastDayOfLastMonth = new Date(year, month, 0); // 上月最后一天
            const lastDateOfLastMonth = lastDayOfLastMonth.getDate(); // 上月最后一天的日期
            const totalDays = lastDayOfMonth.getDate(); // 当月总天数

            // 生成上月补位日期（第一行，星期几就补几个）
            for (let i = 0; i < firstDayWeek; i++) {
                const date = lastDateOfLastMonth - firstDayWeek + 1 + i;
                const lastMonthDate = new Date(year, month - 1, date);
                const lunar = getLunarDate(lastMonthDate);
                const festival = getDateFestival(lastMonthDate, lunar);
                createDateItem(date, lunar, festival, true, false);
            }

            // 生成当月核心日期
            for (let i = 1; i <= totalDays; i++) {
                const isToday = isTodayYear && isTodayMonth && i === today.getDate();
                const currentDate = new Date(year, month, i);
                const lunar = getLunarDate(currentDate);
                const festival = getDateFestival(currentDate, lunar);
                createDateItem(i, lunar, festival, false, isToday);
            }

            // 计算需要补的下月日期数量（凑满6行42天，手机日历标准）
            const totalItems = firstDayWeek + totalDays;
            const nextMonthFill = totalItems % 7 === 0 ? 0 : 7 - (totalItems % 7);
            // 生成下月补位日期
            for (let i = 1; i <= nextMonthFill; i++) {
                const nextMonthDate = new Date(year, month + 1, i);
                const lunar = getLunarDate(nextMonthDate);
                const festival = getDateFestival(nextMonthDate, lunar);
                createDateItem(i, lunar, festival, true, false);
            }

            // 创建单个日期项DOM
            function createDateItem(num, lunar, festival, isOtherMonth, isToday) {
                const item = document.createElement('div');
                item.className = `date-item ${isOtherMonth ? 'other-month' : ''} ${isToday ? 'today' : ''}`;
                // 节日标签（有节日才显示）
                if (festival) {
                    const festivalTag = document.createElement('div');
                    festivalTag.className = 'festival-tag';
                    festivalTag.innerText = festival;
                    item.appendChild(festivalTag);
                }
                // 公历数字
                const solarNum = document.createElement('div');
                solarNum.innerText = num;
                item.appendChild(solarNum);
                // 农历日期
                const lunarEl = document.createElement('div');
                lunarEl.className = 'lunar-date';
                lunarEl.innerText = lunar;
                item.appendChild(lunarEl);
                dateGrid.appendChild(item);
            }
        }

        // 7. 更新实时时间（秒级刷新）
        function updateRealTime() {
            const now = new Date();
            const h = String(now.getHours()).padStart(2, '0');
            const m = String(now.getMinutes()).padStart(2, '0');
            const s = String(now.getSeconds()).padStart(2, '0');
            document.getElementById('big-time').innerText = `${h}:${m}:${s}`;
        }

        // 8. 更新今日信息（本年周数+农历+节日）
        function updateTodayInfo() {
            const today = new Date();
            document.getElementById('year-week').innerText = getYearWeek(today);
            const lunar = getLunarDate(today);
            document.getElementById('today-lunar').innerText = lunar;
            const festival = getDateFestival(today, lunar) || '暂无节日';
            document.getElementById('today-festival').innerText = festival;
        }

        // 9. 月份切换事件
        // 上月
        document.getElementById('prev-month').addEventListener('click', () => {
            currentShowMonth--;
            if (currentShowMonth < 0) {
                currentShowMonth = 11;
                currentShowYear--;
            }
            renderCalendar(currentShowYear, currentShowMonth);
        });
        // 下月
        document.getElementById('next-month').addEventListener('click', () => {
            currentShowMonth++;
            if (currentShowMonth > 11) {
                currentShowMonth = 0;
                currentShowYear++;
            }
            renderCalendar(currentShowYear, currentShowMonth);
        });

        // 初始化页面
        window.onload = function() {
            updateRealTime(); // 初始化实时时间
            setInterval(updateRealTime, 1000); // 秒级刷新时间
            updateTodayInfo(); // 初始化今日信息
            renderCalendar(currentShowYear, currentShowMonth); // 初始化月历视图
        };
    </script>
</body>
</html>